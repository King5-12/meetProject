(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"/l56":function(e,t,a){"use strict";a("miYZ");var r=a("tsqr"),o=a("2qj+"),s=a("jxKE"),c="http://121.89.204.99:8080";console.log("socket io use url: ",c);var m=Object(o["a"])(c,{transports:["websocket"]});m.on(s["a"],(e=>{r["b"].error(e,2)})),t["a"]=m},"9kvl":function(e,t,a){"use strict";var r=a("FfOG");a.d(t,"a",(function(){return r["b"]}));a("bCY9")},Gz7Q:function(e,t,a){"use strict";a.r(t);a("+L6B");var r,o=a("2/Rp"),s=(a("miYZ"),a("tsqr")),c=a("tJVT"),m=(a("5NDa"),a("5rEg")),n=a("q1tI"),i=a.n(n),l=a("9kvl"),u=a("xEpL"),h=a.n(u),g=a("t8ds"),d=a("/l56"),_=a("jxKE"),v=m["a"].TextArea,b="http://q.qlogo.cn/headimg_dl?dst_uin=31502034&spec=100";(function(e){e["self"]="self",e["other"]="other"})(r||(r={}));var f=e=>{var t=e.value;return i.a.createElement("div",{className:h.a["chat-room-message-item-".concat(t.type)]},i.a.createElement("div",{className:h.a["chat-room-message-item-title"]},i.a.createElement("div",{className:h.a["chat-room-message-item-avatar"]},i.a.createElement("img",{src:b,alt:""})),i.a.createElement("div",{className:h.a["chat-room-message-item-name"]},t.name)),i.a.createElement("div",{className:h.a["chat-room-message-item-text"]},t.data))},p=()=>{var e=Object(n["useState"])([]),t=Object(c["a"])(e,2),a=t[0],m=t[1],u=Object(n["useState"])(""),b=Object(c["a"])(u,2),p=b[0],E=b[1],x=Object(n["useRef"])(""),j=Object(n["useRef"])([]);Object(n["useEffect"])((()=>{x.current=g["a"].get(),console.log(x.current),x.current||l["a"].push("/login"),d["a"].on(_["e"],(e=>{var t=e.data,a=t.user,o=t.msg;console.log(e,"msgres"),j.current=[...j.current,{type:r.other,data:o,name:a}],m(j.current)})),d["a"].on(_["b"],(e=>{console.log("JOIN res: ",e),s["b"].info("\u7528\u6237".concat(e.data,"\u52a0\u5165\u7fa4\u804a"))})),d["a"].on(_["c"],(e=>{console.log("LEAVE: ",e),e.data&&s["b"].info("\u7528\u6237".concat(e.data,"\u79bb\u5f00\u7fa4\u804a"))}))}),[]);var N=()=>{if(""===p.trim())return s["b"].info("\u6d88\u606f\u4e0d\u80fd\u4e3a\u7a7a"),void E("");j.current=[...j.current,{type:r.self,data:p.trim(),name:x.current}],m(j.current),d["a"].emit(_["e"],{data:{user:x.current,msg:p}}),E("")};return i.a.createElement("div",{className:h.a["chat-box"]},i.a.createElement("div",{className:h.a["chat-room-message-box"]},i.a.createElement("div",{className:h.a["chat-room-message-title"]},i.a.createElement("div",null,"\u3010\u7fa4\u804a\u3011")),i.a.createElement("div",{className:h.a["chat-room-message-list"]},a.map(((e,t)=>i.a.createElement(f,{value:e,key:t}))))),i.a.createElement("div",{className:h.a["chat-room-input-box"]},i.a.createElement(v,{className:h.a["chat-room-input-textarea"],placeholder:"\u8bf7\u8f93\u5165\u4f60\u9700\u8981\u53d1\u9001\u7684\u5185\u5bb9",value:p,onChange:e=>{E(e.target.value)}}),i.a.createElement("div",{className:h.a["chat-room-input-btn"]},i.a.createElement(o["a"],{onClick:N},"\u53d1\u9001"))))};t["default"]=p},jxKE:function(e,t,a){"use strict";a.d(t,"d",(function(){return r})),a.d(t,"f",(function(){return o})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return c})),a.d(t,"e",(function(){return m})),a.d(t,"a",(function(){return n}));var r="login",o="register",s="join",c="leave",m="msg",n="error"},t8ds:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=(e,t)=>({storage:window[t],get(){return this.storage.getItem(e)||""},set(t){this.storage.setItem(e,t)},remove(){this.storage.removeItem(e)}}),o=e=>r(e,"sessionStorage"),s="login_token",c=o(s)},xEpL:function(e,t,a){e.exports={"chat-box":"chat-box___36HKE","chat-room-message-box":"chat-room-message-box___36X6u","chat-room-message-title":"chat-room-message-title___2MeDd","chat-room-message-list":"chat-room-message-list___tvI9d","chat-room-message-item-self":"chat-room-message-item-self___1cSWj","chat-room-message-item-other":"chat-room-message-item-other___hm2ei","chat-room-message-item-title":"chat-room-message-item-title___1Jniw","chat-room-message-item-avatar":"chat-room-message-item-avatar___2XK08","chat-room-message-item-name":"chat-room-message-item-name___1jndO","chat-room-message-item-text":"chat-room-message-item-text___2SNMc","chat-room-input-box":"chat-room-input-box___3Y-Oe","chat-room-input-textarea":"chat-room-input-textarea___2bqox","chat-room-input-btn":"chat-room-input-btn___1_qd4"}}}]);